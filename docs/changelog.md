# Changelog - LED Control App

Все значительные изменения в проекте документируются в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
и проект следует [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Планируется
- Создание структуры папок lib/
- Разработка базовых сервисов
- Создание моделей данных
- Исследование BLE библиотек

## [1.0.0] - 2024-12-19

### Добавлено
- Инициализация Flutter проекта с базовой структурой
- Создание папки `docs/` для документации проекта
- Создание `Project.md` - детальное описание архитектуры проекта
- Создание `Tasktracker.md` - система отслеживания задач
- Создание `Diary.md` - дневник технических решений
- Создание `qa.md` - вопросы для уточнения архитектуры
- Создание `changelog.md` - журнал изменений
- Создание `development_plan.md` - детальный план разработки Flutter приложения
- Базовая структура приложения с main.dart и start_screen.dart
- Настройка анализа кода (analysis_options.yaml)
- Конфигурация pubspec.yaml с базовыми зависимостями
- Уточнение области ответственности: только Flutter приложение (STM32WB55 - отдельный проект)

### Изменено
- Обновлен README.md с базовой информацией о проекте
- Настроен flutter_lints для обеспечения качества кода
- Обновлена документация с учетом разделения ответственности между Flutter и STM32 проектами
- Ответы на все вопросы в qa.md как основатель приложения

### Исправлено
- Нет исправлений в этой версии

### Технические детали
- **Flutter Version**: 3.7.2+
- **Dart Version**: Соответствует Flutter SDK
- **Platforms**: Android, iOS (базовая поддержка)
- **Dependencies**: 
  - flutter: sdk
  - cupertino_icons: ^1.0.8
  - flutter_lints: ^5.0.0 (dev)

### Архитектурные решения
- Определена общая архитектура системы (Flutter App ↔ STM32WB55 ↔ LED)
- Выбран BLE как технология связи
- Определен протокол связи с JSON форматом (согласован с STM32 командой)
- Спланирована структура проекта с разделением на слои
- Уточнена область ответственности: только Flutter приложение
- Выбран Riverpod для state management
- Выбран GoRouter для навигации
- Определена freemium бизнес-модель

### Протокол связи
- **BLE Service UUID**: 0000FFE0-0000-1000-8000-00805F9B34FB
- **LED Control Characteristic**: 0000FFE1-0000-1000-8000-00805F9B34FB
- **LED Status Characteristic**: 0000FFE2-0000-1000-8000-00805F9B34FB
- **Connection Status Characteristic**: 0000FFE3-0000-1000-8000-00805F9B34FB

### Структура проекта
```
lib/
├── main.dart                 # Точка входа приложения
├── screens/                  # Экранные виджеты
├── services/                 # Бизнес-логика и сервисы
├── models/                   # Модели данных
├── widgets/                  # Переиспользуемые виджеты
└── utils/                    # Утилиты и константы
```

### Этапы разработки
- **Этап 1**: Базовая структура (25% завершено)
- **Этап 2**: BLE интеграция (0% завершено)
- **Этап 3**: LED управление (0% завершено)
- **Этап 4**: UI/UX (0% завершено)
- **Этап 5**: Тестирование и оптимизация (0% завершено)
- **Этап 6**: Развертывание (0% завершено)

### Метрики качества
- **Покрытие тестами**: 0% (планируется > 80%)
- **Ошибки линтера**: 0
- **Документация**: 100% для созданных компонентов

### Следующие релизы
- **v1.1.0**: Базовая структура и навигация
- **v1.2.0**: BLE интеграция
- **v1.3.0**: LED управление
- **v1.4.0**: UI/UX улучшения
- **v1.5.0**: Тестирование и оптимизация
- **v2.0.0**: Релизная версия

---

## Типы изменений

- **Добавлено** - для новых функций
- **Изменено** - для изменений в существующей функциональности
- **Устарело** - для функций, которые скоро будут удалены
- **Удалено** - для удаленных функций
- **Исправлено** - для исправления багов
- **Безопасность** - для исправлений уязвимостей

---

## Ссылки

- [Project.md](./Project.md) - Детальное описание проекта
- [Tasktracker.md](./Tasktracker.md) - Отслеживание задач
- [Diary.md](./Diary.md) - Технический дневник
- [qa.md](./qa.md) - Вопросы и ответы

## [2024-06-XX] - Старт BLE MVP с 4 кнопками
### Добавлено
- Начата реализация BLE-прототипа: экран с 4 кнопками для управления LED, BLE-сервис для сканирования и подключения 

## [2024-12-19] - Завершение BLE MVP с 4 кнопками
### Добавлено
- Создан BLE-сервис для сканирования и подключения к STM32WB55
- Реализован главный экран с 4 кнопками для управления LED
- Добавлена интеграция BLE-логики с UI
- Настроены разрешения для Android
- Собран первый APK

### Изменено
- Обновлен main.dart для использования нового HomeScreen
- Добавлены BLE разрешения в AndroidManifest.xml
- Исправлен тестовый файл widget_test.dart

### Исправлено
- Ошибки линтера в BLE-сервисе и helpers.dart 

## [2024-12-19] - Bluetooth Scan System Development
### Добавлено
- Создан новый экран сканирования Bluetooth устройств (BluetoothScanScreen)
- Реализована функция сканирования всех доступных BLE устройств
- Добавлен виджет отображения списка найденных устройств с детальной информацией
- Интегрирована навигация между экранами с использованием GoRouter

### Изменено
- Обновлен BLE сервис для поддержки сканирования всех устройств (не только STM32WB55)
- Модифицирована главная навигация для включения экрана сканирования

### Исправлено
- Улучшена обработка ошибок при сканировании Bluetooth устройств 